(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):("string"!=typeof t&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}var n=6e4;function s(e){return e.getTime()%n}function l(e){var t=new Date(e.getTime()),l=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var a=l>0?(n+s(t))%n:s(t);return l*n+a}function a(n){e(1,arguments);var s=t(n);return s.setHours(0,0,0,0),s}var i=864e5;function d(t,n){e(2,arguments);var s=a(t),d=a(n),o=s.getTime()-l(s),c=d.getTime()-l(d);return Math.round((o-c)/i)}function o(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}const c=document.querySelector(".modal"),r=document.querySelector(".advButton"),u=document.querySelector(".advanced-options"),m=document.querySelector(".exit-modal"),p=document.querySelector(".modal-content"),v=document.createElement("p"),f=e=>"H"===e.textContent?"high":"M"===e.textContent?"medium":"low",h=n=>function(n,s){e(2,arguments);var l=t(n),a=t(s),i=o(l,a),c=Math.abs(d(l,a));l.setDate(l.getDate()-i*c);var r=o(l,a)===-i,u=i*(c-r);return 0===u?0:u}(new Date(n),new Date)+" day(s) left",y=(e,t)=>{e.style.display="block",v.textContent=t,p.append(v,m),m.addEventListener("click",(()=>{e.style.display="none"}))},E=(e,t,n,s,l)=>{e.list[t].status?s.appendChild(n):l.appendChild(n)},g=(e,t,n)=>""!==t||(n(e,"Task title must exist!"),!1);document.addEventListener("keydown",(e=>{const{keyCode:t}=e;27===t&&(c.style.display="none")}));const L=e=>{const t=document.createElement("span");return t.innerHTML='<i class="fas fa-chevron-down"></i>',t.addEventListener("click",(t=>{t.preventDefault(),"block"===e.style.display?e.style.display="none":e.style.display="block"})),t};r.addEventListener("click",(()=>{"block"===u.style.display?(u.style.display="none",r.innerText="Advanced Options"):(u.style.display="block",r.textContent="Hide Options")}));const C=JSON.parse(localStorage.getItem("projectsList"))||[],k=()=>{localStorage.setItem("projectsList",JSON.stringify(C))},b=(e,t,n,s=null)=>{const l=document.createElement("span");return l.innerHTML="<i class='fas fa-edit'></i>",l.addEventListener("click",(()=>{const l=((e,t,n,s)=>{const l=document.createElement("form"),a=document.createElement("input"),i=document.createElement("input"),d=document.createElement("div"),o=document.createElement("input"),r=document.createElement("select"),u=document.createElement("input"),m=document.createElement("input");a.classList.add("form-control","mb-2"),i.classList.add("form-control","mb-2"),o.classList.add("form-control","mr-md-2","mb-2","mb-md-0"),r.classList.add("custom-select","custom-select-sm","mb-2","mb-md-0"),u.classList.add("btn","btn-secondary","button","ml-md-3"),m.classList.add("btn","btn-secondary","button","ml-md-3"),d.classList.add("extra-inputs"),a.type="text",i.type="text",o.type="date",u.type="submit",m.type="submit";const p=document.createElement("option"),v=document.createElement("option"),f=document.createElement("option");return p.value="H",v.value="M",f.value="L",p.textContent="High",v.textContent="Medium",f.textContent="Low",u.value="Cancel",a.value=e.list[t].title,i.value=e.list[t].desc,o.value=e.list[t].dueDate,r.value=e.list[t].priority,r.append(p,v,f),l.append(a,i),d.append(o,r,u,m),l.appendChild(d),m.addEventListener("click",(l=>{l.preventDefault(),s(c,a.value,y)&&(e.list[t].title=a.value,e.list[t].desc=i.value,e.list[t].dueDate=o.value,e.list[t].priority=r.value,k(),n(e))})),u.addEventListener("click",(t=>{t.preventDefault(),n(e)})),l})(e,t,n,g);n(e,l,t,s)})),l},x=(e,t,n)=>{const s=document.createElement("span");return s.innerHTML="<i class='fas fa-trash-alt'></i>",s.addEventListener("click",(()=>{e.list.splice(t,1),n(e),k()})),s},S=(e,t,n)=>{const s=document.createElement("input");return s.classList.add("check-task"),s.type="checkbox",s.checked=e.list[t].status,s.addEventListener("change",(()=>{e.list[t].status=!!s.checked,n(e),k()})),s},D=(e,t,n,s)=>{const l=document.createElement("span");return l.innerHTML="<i class='fas fa-trash-alt'></i>",l.addEventListener("click",(()=>{e.splice(t,1),k(),n(e),s(e[0])})),l},T=document.getElementById("sidebar-input"),w=(e,t,n,s,l=!1)=>({title:e,desc:t,dueDate:n,priority:s,status:l}),M=(e,t=[])=>({title:e,list:t}),q=document.getElementById("task-form"),B=document.getElementById("submit"),H=document.querySelector(".tasks-list"),I=document.querySelector(".done-list"),j=document.getElementById("sidebar-form"),O=document.getElementById("sidebar-submit"),A=document.querySelector(".project-names"),N=(e,t=null,n=null)=>{for(;H.firstChild;)H.removeChild(H.firstChild);for(;I.firstChild;)I.removeChild(I.firstChild);if(q.style.display="block",void 0!==C&&0!==C.length)for(let s=0;s<e.list.length;s+=1){const l=document.createElement("div");l.classList.add("task-container");const a=document.createElement("div"),i=document.createElement("div"),d=document.createElement("h3"),o=document.createElement("div"),c=document.createElement("p"),r=document.createElement("p"),u=document.createElement("span"),m=document.createElement("p"),p=L(o),v=x(e,s,N),y=S(e,s,N),g=b(e,s,N);d.textContent=e.list[s].title,c.textContent=e.list[s].desc,r.textContent=e.list[s].dueDate,u.textContent=h(e.list[s].dueDate),r.classList.add("tooltipp"),u.classList.add("tooltipptext"),m.textContent=e.list[s].priority,m.classList.add(f(m),"p-1","rounded"),a.classList.add("main-info"),i.classList.add("additional-info"),y.classList.add("mr-2"),o.style.display="none",o.classList.add("details-container","mt-2"),r.appendChild(u),a.append(y,d),i.append(m,r,v,g,p),l.append(a,i),s===n&&l.appendChild(t),o.appendChild(c),l.appendChild(o),E(e,s,l,I,H)}else q.style.display="none"},F=(e,t=null,n=null,s=null)=>{for(;H.firstChild;)H.removeChild(H.firstChild);for(;I.firstChild;)I.removeChild(I.firstChild);q.style.display="none";for(let e=0;e<C.length;e+=1)for(let l=0;l<C[e].list.length;l+=1){const a=document.createElement("div");a.classList.add("task-container");const i=document.createElement("div"),d=document.createElement("div"),o=document.createElement("h3"),c=document.createElement("div"),r=document.createElement("p"),u=document.createElement("p"),m=document.createElement("span"),p=document.createElement("p"),v=L(c),y=x(C[e],l,F),g=S(C[e],l,F),k=b(C[e],l,F,e);o.textContent=C[e].list[l].title,r.textContent=C[e].list[l].desc,u.textContent=C[e].list[l].dueDate,m.textContent=h(C[e].list[l].dueDate),u.classList.add("tooltipp"),m.classList.add("tooltipptext"),p.textContent=C[e].list[l].priority,p.classList.add(f(p),"p-1","rounded"),i.classList.add("main-info"),d.classList.add("additional-info"),g.classList.add("mr-2"),c.style.display="none",c.classList.add("details-container","mt-2"),u.appendChild(m),i.append(g,o),d.append(p,u,y,k,v),a.append(i,d),l===n&&e===s&&a.appendChild(t),c.appendChild(r),a.appendChild(c),E(C[e],l,a,I,H)}},J=()=>{const e=document.createElement("div"),t=document.createElement("h3");return e.classList.add("list-cont"),t.textContent="All tasks",e.appendChild(t),A.appendChild(e),t.addEventListener("click",(t=>{t.preventDefault(),document.querySelector(".active").classList.remove("active"),e.classList.add("active"),C[0]&&F()})),e},R=e=>{for(;A.firstChild;)A.removeChild(A.firstChild);if(void 0===e||0===e.length)return;const t=J();A.appendChild(t);for(let t=0;t<e.length;t+=1){const n=document.createElement("div"),s=document.createElement("h3"),l=D(e,t,R,N);n.classList.add("list-cont"),s.textContent=e[t].title,n.append(s,l),A.appendChild(n),e[0]&&0===t&&n.classList.add("active"),s.addEventListener("click",(s=>{s.preventDefault(),document.querySelector(".active").classList.remove("active"),n.classList.add("active"),N(e[t])}))}};B.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".active").firstChild.innerText,n=C.filter((e=>e.title===t))[0];((e,t,n)=>{const s=document.querySelector("#task-input").value,l=document.getElementById("task-desc-input").value,a=document.getElementById("task-date-input").value,i=document.getElementById("task-priority-input").value;if(t(c,s,y)){const t=w(s,l,a,i);n.reset(),e.list.unshift(t)}})(n,g,q),k(),N(n)})),O.addEventListener("click",(e=>{e.preventDefault(),((e,t,n)=>""!==t||(n(e,"List title must exist!"),!1))(c,T.value,y)&&(((e,t)=>{const n=M(T.value);t.reset(),e.unshift(n)})(C,j),k(),R(C),N(C[0]))})),null===localStorage.getItem("projectsList")&&(e=>{const t=w("The Winds of Winter","Book 1","2022-12-11","H",!0),n=w("A Dream of Spring","Book 2","2021-12-03","H"),s=w("A Clash of Kings","Book 3","2023-12-12","M"),l=w("A Game of Thrones","Book 2","2021-11-06","L"),a=M("A Song of Ice and Fire"),i=M("The Lord of the Rings"),d=w("The Two Towers","desc1","2022-12-04","M"),o=w("Fellowship of the Ring","desc1","2021-12-10","M");a.list.push(t,n,s,l),i.list.push(d,o),e.push(a),e.push(i)})(C),R(C),F(),document.querySelector(".active").classList.remove("active"),document.getElementsByClassName("list-cont")[0].classList.add("active")})();